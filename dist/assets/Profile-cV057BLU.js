var g=(i,m,t)=>new Promise((h,o)=>{var p=r=>{try{l(t.next(r))}catch(c){o(c)}},x=r=>{try{l(t.throw(r))}catch(c){o(c)}},l=r=>r.done?h(r.value):Promise.resolve(r.value).then(p,x);l((t=t.apply(i,m)).next())});import{c as b,j as e,S as y,C as j}from"./index-aJHCf1ju.js";import{r as n,e as N}from"./react-vendor-M-FLgoaJ.js";import{supabase as u}from"./supabase-BdAQ2OXP.js";import"./supabase-CxI1Zui4.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=b("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=b("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),D=()=>{const[i,m]=n.useState(null),[t,h]=n.useState([]),[o,p]=n.useState(!0),x=N(),l=n.useRef(!1);if(n.useEffect(()=>{if(l.current)return;l.current=!0,g(void 0,null,function*(){const{data:{user:d}}=yield u.auth.getUser();if(!d){x("/");return}m(d);try{const{data:a,error:k}=yield u.functions.invoke("get-user-orders");a&&a.orders&&h(a.orders)}catch(a){}finally{p(!1)}})},[x]),o)return e.jsx("div",{className:"min-h-screen flex items-center justify-center text-white",children:"Loading Profile..."});const r=t.reduce((s,d)=>s+(d.price||0),0),c=t.filter(s=>["exact_match","overpaid"].includes(s.status)).length,f=t.length-c;return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl p-6 border border-gray-800 shadow-xl mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-2xl font-bold text-white",children:i.email.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Welcome back!"}),e.jsx("p",{className:"text-gray-400",children:i.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Total Orders"}),e.jsx(y,{className:"w-5 h-5 text-purple-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:t.length})]}),e.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Total Spent"}),e.jsx(v,{className:"w-5 h-5 text-green-500"})]}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",r.toFixed(2)]})]}),e.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Pending"}),e.jsx(j,{className:"w-5 h-5 text-yellow-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:f})]})]})]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Order History"}),t.length===0?e.jsxs("div",{className:"text-center py-12 bg-[#1a1a1a] rounded-2xl border border-gray-800",children:[e.jsx(w,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No orders yet."})]}):e.jsx("div",{className:"space-y-4",children:t.map((s,d)=>{var a;return e.jsxs("div",{className:"bg-[#1a1a1a] p-4 rounded-xl border border-gray-800 flex justify-between items-center hover:border-purple-500/30 transition-colors",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white mb-1",children:s.product||"Unknown Product"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[new Date(s.created_at).toLocaleDateString()," â€¢ ",(a=s.crypto)==null?void 0:a.toUpperCase()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-mono font-bold text-white mb-1",children:["$",s.price]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${["exact_match","overpaid"].includes(s.status)?"bg-green-900/50 text-green-400 border border-green-500/20":"bg-yellow-900/50 text-yellow-400 border border-yellow-500/20"}`,children:s.status.replace(/_/g," ").toUpperCase()})]})]},d)})})]})};export{D as default};
